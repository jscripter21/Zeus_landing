document.addEventListener("DOMContentLoaded",(()=>{const e=document.querySelector(".wheel_btn"),n=document.querySelector(".wheel_spinner--main"),t=document.getElementById("overlay"),s=document.getElementById("audioPermissionModal"),i=document.getElementById("acceptAudio"),o=document.getElementById("declineAudio"),c=document.querySelector(".background-music"),l=document.querySelector(".wheel_spinner_img-storm");let a=!1,d=!1;function r(){t&&(t.style.display="flex")}function m(e){const n=document.querySelector(e);n&&(n.pause(),n.currentTime=0,n.play().catch((e=>{console.error("Помилка при відтворенні звуку:",e)})))}e&&n?e.addEventListener("click",(()=>{d&&m("#sound-second-click"),a?(n.classList.remove("wheel_spinner_animated_again"),n.classList.add("wheel_spinner_animated_1"),e.classList.remove("spin"),a=!1,setTimeout(r,5500)):(e.classList.remove("spin"),n.classList.add("wheel_spinner_animated_again"),n.classList.remove("wheel_spinner_animated"),setTimeout((()=>{a=!0,e.classList.add("spin")}),5e3)),l&&setTimeout((()=>{l.classList.add("blink-animation"),d&&m("#sound-first-click"),setTimeout((()=>{l.classList.remove("blink-animation")}),1500)}),5e3)})):console.error("Кнопка або спіннер не знайдені!"),window.closePopup=()=>{t&&(t.style.display="none")},s&&i&&o&&(s.style.display="flex",i.addEventListener("click",(async()=>{if(d=!0,c)try{await c.play()}catch(e){console.error("Помилка при відтворенні фонової музики:",e)}s.style.display="none"})),o.addEventListener("click",(()=>{s.style.display="none"})))}));