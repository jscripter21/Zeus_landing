document.addEventListener("DOMContentLoaded",(()=>{const e=document.querySelector(".wheel_btn"),n=document.querySelector(".wheel_spinner--main"),t=document.getElementById("overlay"),s=document.getElementById("audioPermissionModal"),i=document.getElementById("acceptAudio"),l=document.getElementById("declineAudio"),o=document.querySelector(".background-music"),d=document.getElementById("sound-second-click"),a=document.getElementById("sound-first-click"),c=document.querySelector(".wheel_spinner_img-storm");let r=!1,m=!1;function u(){t&&(t.style.display="flex")}function y(e){e&&(e.pause(),e.currentTime=0,e.play().catch((e=>{console.error("Помилка при відтворенні звуку:",e)})))}e&&n?e.addEventListener("click",(()=>{m&&y(d),r?(n.classList.remove("wheel_spinner_animated_again"),n.classList.add("wheel_spinner_animated_1"),e.classList.remove("spin"),r=!1,setTimeout(u,5500)):(e.classList.remove("spin"),n.classList.add("wheel_spinner_animated_again"),n.classList.remove("wheel_spinner_animated"),setTimeout((()=>{r=!0,e.classList.add("spin")}),5e3)),c&&setTimeout((()=>{c.classList.add("blink-animation"),m&&y(a),setTimeout((()=>{c.classList.remove("blink-animation")}),1500)}),5e3)})):console.error("Кнопка або спіннер не знайдені!"),window.closePopup=()=>{t&&(t.style.display="none")},s&&i&&l&&(s.style.display="flex",i.addEventListener("click",(async()=>{if(m=!0,o){try{await o.play()}catch(e){console.error("Помилка при відтворенні фонової музики:",e)}s.style.display="none"}else s.style.display="none"})),l.addEventListener("click",(()=>{s.style.display="none"})))}));