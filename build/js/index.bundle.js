document.addEventListener("DOMContentLoaded",(()=>{const e=document.querySelector(".wheel_btn"),n=document.querySelector(".wheel_spinner--main"),t=document.getElementById("overlay"),s=document.getElementById("audioPermissionModal"),i=document.getElementById("acceptAudio"),a=document.getElementById("declineAudio"),o=document.querySelector(".background-music"),l=document.querySelector(".wheel_spinner_img-storm"),d=new Audio("https://sloterra.net/emails-img/lending/slotopass_lending/Sounds/click-zeus.mp3?v=1.0");d.preload="auto";const c=new Audio("https://sloterra.net/emails-img/lending/slotopass_lending/Sounds/thunder-zeus.mp3?v=1.0");c.preload="auto";let r=!1,m=!1;function u(){t&&(t.style.display="flex")}async function p(e){try{e.pause(),e.currentTime=0,await e.play()}catch(e){console.error("Помилка при відтворенні звуку:",e)}}e&&n?e.addEventListener("click",(async()=>{m&&await p(d),r?(n.classList.remove("wheel_spinner_animated_again"),n.classList.add("wheel_spinner_animated_1"),e.classList.remove("spin"),r=!1,setTimeout(u,5500)):(e.classList.remove("spin"),n.classList.add("wheel_spinner_animated_again"),n.classList.remove("wheel_spinner_animated"),setTimeout((()=>{r=!0,e.classList.add("spin")}),5e3)),l&&setTimeout((async()=>{l.classList.add("blink-animation"),m&&await p(c),setTimeout((()=>{l.classList.remove("blink-animation")}),1500)}),5e3)})):console.error("Кнопка або спіннер не знайдені!"),window.closePopup=()=>{t&&(t.style.display="none")},s&&i&&a&&(s.style.display="flex",i.addEventListener("click",(async()=>{if(m=!0,o)try{await o.play()}catch(e){console.error("Помилка при відтворенні фонової музики:",e)}s.style.display="none"})),a.addEventListener("click",(()=>{s.style.display="none"})))}));